<!-- templates/shared/button-box.html -->

{% set section = section or "market" %}

<div class="button-box">
  <!-- 💬 Tip / Warning Box -->
  <div class="info-box" id="{{ section }}-info-box">
    <strong id="{{ section }}-info-label">Tip:</strong>
    <span id="{{ section }}-info-message">
      Click a button to begin an action.
    </span>
  </div>

  <!-- 🛠️ Action Buttons -->
  <div class="button-toolbar" id="{{ section }}-toolbar">
    <button id="{{ section }}-edit-btn" class="action-btn">Edit</button>
    <button id="{{ section }}-copy-btn" class="action-btn">Copy</button>
    <button
      id="{{ section }}-paste-btn"
      class="action-btn disabled-btn"
      disabled
    >
      Paste
    </button>
    <button
      id="{{ section }}-add-btn"
      class="action-btn {% if edit_mode == 'cell' %}disabled-btn{% endif %}"
      {% if edit_mode == 'cell' %}disabled{% endif %}
    >
      Add
    </button>
    <button id="{{ section }}-delete-btn" class="action-btn">Delete</button>
    <button id="{{ section }}-save-btn" class="action-btn">Save</button>
    <button
      id="{{ section }}-undo-btn"
      class="action-btn disabled-btn"
      disabled
    >
      Undo
    </button>
    <div class="undo-limit-box" id="{{ section }}-undo-limit-box"></div>
  </div>

  <!-- 🧭 Edit Mode + Confirm -->
  <div class="button-footer-row">
    <div class="edit-mode-controls">
      <label>
        <input
          type="radio"
          name="{{ section }}-edit-mode"
          value="row"
          checked
        />
        Edit Rows
      </label>
      <label>
        <input type="radio" name="{{ section }}-edit-mode" value="cell" />
        Edit Columns
      </label>
      <label>
        <input type="checkbox" id="{{ section }}-show-id-toggle" />
        Show Line ID
      </label>

      <div class="confirm-button-container">
        <button
          id="{{ section }}-confirm-btn"
          class="confirm-btn gray"
          disabled
        >
          Confirm
        </button>
      </div>
    </div>
  </div>

  <!-- 📊 Action + Selection Footer -->
  <div class="status-footer" id="{{ section }}-action-footer">
    <span>
      <strong>Action:</strong>
      <span id="{{ section }}-current-action">None</span>
    </span>
    <span>
      <strong>Selected Rows:</strong>
      <span id="{{ section }}-selected-count">0</span>
    </span>
  </div>

  <!-- ⚠️ Mode Switch Popup -->
  <div class="mode-switch-popup" id="{{ section }}-mode-switch-popup">
    <div class="popup-content">
      <div class="popup-title">There are unsaved changes. Pick an option below:</div>
      <button id="{{ section }}-popup-save-btn" class="popup-btn">Save & Switch</button>
      <button id="{{ section }}-popup-discard-btn" class="popup-btn">Discard & Switch</button>
      <button id="{{ section }}-popup-stay-btn" class="popup-btn">Stay in Current Mode</button>
    </div>
  </div>
</div>
