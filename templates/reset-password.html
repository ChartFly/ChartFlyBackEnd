<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Reset Your Password - ChartFly</title>
    <link rel="stylesheet" href="/static/css/auth.css">
    <script>
        function validateResetForm(event) {
            const pw1 = document.getElementById("new_password").value;
            const pw2 = document.getElementById("confirm_password").value;
            const regex = /^(?=.*[a-zA-Z])(?=.*\d)(?=.*[\W_]).{6,}$/;

            if (pw1 !== pw2) {
                alert("❗ Passwords do not match.");
                event.preventDefault();
                return false;
            }

            if (!regex.test(pw1)) {
                alert("❗ Password must be at least 6 characters and include letters, numbers, and a special character.");
                event.preventDefault();
                return false;
            }

            return true;
        }

        function toggleVisibility(id) {
            const field = document.getElementById(id);
            field.type = field.type === "password" ? "text" : "password";
        }
    </script>
</head>
<body>
<div class="auth-container">
    <img src="/static/images/Chartfly-logo.png" alt="ChartFly Logo" class="auth-logo">
    <h1>ChartFly</h1>
    <h2>🔒 Reset Your Password</h2>

    <form method="post" action="/auth/reset-password" onsubmit="return validateResetForm(event)">
        <input type="hidden" name="token" value="{{ token }}">

        <div style="position: relative;">
            <input type="password" id="new_password" name="new_password" placeholder="New Password" required>
            <span onclick="toggleVisibility('new_password')" style="position: absolute; right: 12px; top: 12px; cursor: pointer;">👁</span>
        </div>

        <div style="position: relative;">
            <input type="password" id="confirm_password" name="confirm_password" placeholder="Confirm Password" required>
            <span onclick="toggleVisibility('confirm_password')" style="position: absolute; right: 12px; top: 12px; cursor: pointer;">👁</span>
        </div>

        <button type="submit">Reset Password</button>

        <div class="form-notes">
            <p>🔐 Your new password must meet these requirements:</p>
            <ul style="margin-left: 20px; font-size: 0.85em; color: #ccc;">
                <li>At least 6 characters</li>
                <li>Must include letters, numbers, and a symbol</li>
            </ul>
            <p style="font-size: 0.85em; color: #aaa;">
                💡 Tip: Create a strong password you’ll remember. This will replace your old one.
            </p>
        </div>
    </form>

    <p style="margin-top: 20px; font-size: 0.85em;">
        <a href="/auth/login" style="color: #00d4ff;">🔙 Back to Login</a>
    </p>

    <div class="auth-footer">ChartFly Trading Tools. All Rights Reserved</div>
</div>
</body>
</html>
# force deploy