<!-- templates/admin/market-holidays/MarketHolidays.html -->

<section
  id="market-holidays-section"
  class="admin-tab-section"
  style="display: block"
>
  <h2>Manage Market Holidays</h2>

  <!-- ✅ Modular ButtonBox -->
  {% set section = "holiday" %} {% include "shared/ButtonBox.html" with context
  %}

  <!-- 📅 Holiday Table -->
  <div class="table-wrapper" style="min-height: 200px; overflow: visible">
    <table
      id="holidays-table"
      class="admin-table"
      style="display: table; width: 100%; table-layout: fixed"
    >
      <thead>
        <tr>
          <th class="col-select">Select</th>
          <th class="line-id-col" style="display: table-cell">ID</th>
          <th>Name</th>
          <th>Date</th>
          <th>Status</th>
          <th>Close Time</th>
        </tr>
      </thead>
      <tbody>
        <!-- Temporary test row will auto-clear when JS appends real data -->
        <tr>
          <td class="col-select"><input type="checkbox" /></td>
          <td class="line-id-col" style="display: table-cell">123</td>
          <td>Debug Test Row</td>
          <td>2025-07-04</td>
          <td>Upcoming</td>
          <td>1:00 PM</td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- 🛠️ Inline debug script -->
  <script>
    const table = document.querySelector("#holidays-table");
    const tbody = table?.querySelector("tbody");

    if (tbody) {
      console.log("📋 Tbody ready. Initial children:", tbody.children.length);
      const observer = new MutationObserver((mutations) => {
        mutations.forEach((m) => {
          if (m.type === "childList" && m.addedNodes.length > 0) {
            m.addedNodes.forEach((node, i) => {
              if (node.tagName === "TR") {
                console.log(
                  `📦 Row rendered [${i}]:`,
                  node.innerHTML.slice(0, 80)
                );
              }
            });
            console.log(
              "✅ Table render complete — total rows:",
              tbody.querySelectorAll("tr").length
            );
          }
        });
      });
      observer.observe(tbody, { childList: true });
    }
  </script>
</section>
